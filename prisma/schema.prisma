generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Province {
  id   Int    @id @default(autoincrement())
  name String
  City City[]
}

model City {
  id         Int        @id @default(autoincrement())
  name       String
  Province   Province   @relation(fields: [provinceId], references: [id])
  provinceId Int
  Employee   Employee[]
}

model Gender {
  id       Int        @id @default(autoincrement())
  name     String
  Employee Employee[]
}

model MaritalStatus {
  id       Int        @id @default(autoincrement())
  name     String
  Employee Employee[]
}

model Employee {
  id                              Int                               @id @default(autoincrement())
  identificationCard              String
  names                           String
  lastNames                       String
  phone                           String
  email                           String
  birthdate                       DateTime
  childrens                       Int
  address                         String
  genderId                        Int
  gender                          Gender                            @relation(fields: [genderId], references: [id])
  maritalStatusId                 Int
  maritalStatus                   MaritalStatus                     @relation(fields: [maritalStatusId], references: [id])
  cityId                          Int
  City                            City                              @relation(fields: [cityId], references: [id])
  AssistanceEmployeeIdentificator AssistanceEmployeeIdentificator[]
}

model Campus {
  id                    Int                     @id @default(autoincrement())
  name                  String
  secondaryName         String
  address               String
  AssistanceDispositive AssistanceDispositive[]
}

model AssistanceDispositive {
  id                              Int                               @id @default(autoincrement())
  name                            String
  campusId                        Int
  Campus                          Campus                            @relation(fields: [campusId], references: [id])
  serial                          String                            @unique
  AssistanceEmployeeIdentificator AssistanceEmployeeIdentificator[]
}

model AssistanceEmployeeIdentificator {
  id                      Int                   @id @default(autoincrement())
  code                    String
  employeeId              Int
  Employee                Employee              @relation(fields: [employeeId], references: [id])
  assistanceDispositiveId Int
  AssistanceDispositive   AssistanceDispositive @relation(fields: [assistanceDispositiveId], references: [id])
}
